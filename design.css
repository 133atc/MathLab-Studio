    :root{
      
      --brand-h: 222;        
      --brand-s: 90%;
      --brand-l: 56%;

      --accent: hsl(var(--brand-h) var(--brand-s) var(--brand-l));
      --accent-contrast: #fff;

      
      --bg: #0f1220; --bg-tint1: rgba(99,102,241,.10); --bg-tint2: rgba(37,99,235,.12);
      --card:#0f172a; --card-2:#111a33; --text:#e5e7eb; --muted:#9aa3b2;
      --key:#1f2a44; --key-hover:#233051; --key-border:#2a3556;
      --op:#1b2746; --op-hover:#223058;
      --danger:#3b1d1d; --danger-hover:#4a2323;
      --radius: 16px; --shadow-1: 0 8px 24px rgba(0,0,0,.35); --shadow-2: 0 18px 40px rgba(0,0,0,.45);
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f7f9; --bg-tint1: rgba(99,102,241,.10); --bg-tint2: rgba(37,99,235,.12);
        --card:#ffffff; --card-2:#f8fafc; --text:#0f172a; --muted:#667792;
        --key:#f1f5f9; --key-hover:#e6edf5; --key-border:#e7ecf3;
        --op:#e9eefc; --op-hover:#dbe6ff;
        --danger:#ffeaea; --danger-hover:#ffd6d6;
        --shadow-1: 0 8px 24px rgba(0,0,0,.08); --shadow-2: 0 18px 40px rgba(0,0,0,.12);
      }
    }

    
    :root{ font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin:0; min-height:100svh; display:flex; align-items:center; justify-content:center;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 20% -10%, var(--bg-tint2), transparent 60%),
        radial-gradient(1200px 600px at 120% 110%, var(--bg-tint1), transparent 60%),
        var(--bg);
    }

   
    .app{
      width:min(980px, 96vw);
      background: color-mix(in srgb, var(--card) 92%, transparent);
      border: 1px solid color-mix(in srgb, #fff 6%, #000 6%);
      border-radius: var(--radius);
      box-shadow: var(--shadow-1);
      overflow: hidden;
      backdrop-filter: blur(8px) saturate(120%);
    }

    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 16px;
      background: linear-gradient(180deg, color-mix(in srgb, var(--card) 100%, transparent) 0%, transparent 100%);
      border-bottom: 1px solid color-mix(in srgb, #000 16%, transparent);
    }
    .brand{ font-weight:700; letter-spacing:.3px; }
    .actions{ display:flex; align-items:center; gap:10px; }

    
    .tabs{
      display:flex; gap:8px; padding:6px;
      background: color-mix(in srgb, var(--key) 70%, transparent);
      border: 1px solid var(--key-border);
      border-radius: 999px;
    }
    .tab{
      padding:8px 12px; border-radius: 999px; cursor:pointer; font-weight:600;
      border:1px solid transparent; color: var(--muted);
      transition: background .15s ease, color .15s ease, transform .12s ease;
    }
    .tab:hover{ background: color-mix(in srgb, var(--key) 85%, transparent); }
    .tab[aria-selected="true"]{
      background: var(--accent);
      color: var(--accent-contrast);
      border-color: transparent;
      box-shadow: 0 8px 18px color-mix(in srgb, var(--accent) 35%, transparent);
    }

    
    .chip{
      background: var(--key);
      color: var(--text);
      border: 1px solid var(--key-border);
      padding:6px 10px; border-radius: 999px; cursor:pointer;
      transition: background .15s ease, transform .12s ease;
    }
    .chip:hover{ background: var(--key-hover); }
    .chip:active{ transform: translateY(1px); }

    
    .pane{ display:none; }
    .pane[aria-hidden="false"]{ display:block; }
    .pane-inner{ display:flex; gap:24px; padding:16px; }
    .pane-inner > *{ flex:1; }

    
    .calculator{ max-width:540px; margin:auto; }
    .calc-top{
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 14px;
      background: color-mix(in srgb, var(--card-2) 65%, transparent);
      border-bottom:1px solid color-mix(in srgb, #000 16%, transparent);
      color:var(--muted); font-size:.9rem;
    }
    .display{
      padding:18px 16px;
      text-align:right; font-variant-numeric: tabular-nums;
      background: linear-gradient(180deg, color-mix(in srgb, var(--card-2) 75%, transparent), transparent);
      border-bottom:1px solid color-mix(in srgb, #000 12%, transparent);
      box-shadow: inset 0 -1px 0 color-mix(in srgb, #fff 6%, transparent);
    }
    .expr{ color:var(--muted); font-size:1rem; min-height:1.2em; letter-spacing:.2px; }
    .result{ font-size:2.3rem; line-height:1.15; letter-spacing:.3px; user-select:none; }

    .pads{ display:grid; gap:12px; padding:14px; }
    .row{ display:grid; gap:10px; }
    .row.fn { grid-template-columns: repeat(6, 1fr); }
    .row.ops{ grid-template-columns: repeat(4, 1fr); }

    
    button{
      padding:14px 10px; font-size:1.05rem;
      border:1px solid var(--key-border);
      border-radius:12px; background:var(--key); color:var(--text);
      cursor:pointer;
      transition: transform .12s ease, background .15s ease, box-shadow .15s ease, filter .15s ease;
      box-shadow: 0 1px 0 color-mix(in srgb, #000 22%, transparent);
    }
    button:hover{ background: var(--key-hover); }
    button:active{ transform: translateY(1px) scale(.99); }
    button:focus-visible{ outline:3px solid color-mix(in srgb, var(--accent) 45%, transparent); outline-offset:2px; }
    .span-2{ grid-column: span 2; }

    .op{ background: var(--op); border-color: color-mix(in srgb, var(--accent) 25%, transparent); }
    .op:hover{ background: var(--op-hover); }

    .primary{
      background: var(--accent);
      color: var(--accent-contrast);
      border-color: transparent;
      box-shadow: 0 6px 18px color-mix(in srgb, var(--accent) 38%, transparent);
    }
    .primary:hover{ filter: brightness(1.05); }
    .danger{ background: var(--danger); }
    .danger:hover{ background: var(--danger-hover); }

    
    .grid{ display:grid; grid-template-columns: 1fr; gap:14px; padding:16px; }
    .row2{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    label{ font-size:.9rem; color:var(--muted); margin-bottom:6px; display:block; }

    input, select{
      width:100%; padding:12px 10px;
      border:1px solid var(--key-border);
      border-radius:12px; background:var(--key); color:var(--text); font-size:1rem;
      box-shadow: 0 1px 0 color-mix(in srgb, #000 22%, transparent);
      transition: background .15s ease, border-color .15s ease;
    }
    input:focus, select:focus{
      outline:3px solid color-mix(in srgb, var(--accent) 45%, transparent); outline-offset:2px;
      background: var(--key-hover);
    }

    .swap{ display:flex; align-items:center; justify-content:center; }
    .swap button{
      padding:10px 12px; background: var(--accent); color: var(--accent-contrast);
      border:none; border-radius:12px; cursor:pointer;
      box-shadow: 0 6px 18px color-mix(in srgb, var(--accent) 38%, transparent);
    }
    .muted{ color:var(--muted); font-size:.9rem; }
    .conv-result{
      font-size:1.4rem; padding:12px; background: color-mix(in srgb, var(--card-2) 60%, transparent);
      border:1px solid var(--key-border); border-radius:12px;
    }
    .note{ font-size:.85rem; color:var(--muted); padding:0 16px 16px; }

    
    .overlay{
      position: fixed; inset: 0;
      background: color-mix(in srgb, #000 55%, transparent);
      display: grid; place-items: center;
      padding: 24px; z-index: 1000;
      opacity: 0; pointer-events: none;
      transition: opacity .15s ease;
    }
    .overlay[aria-hidden="false"]{ opacity: 1; pointer-events: auto; }

    .modal{
      width: min(640px, 92vw);
      background: var(--card);
      border: 1px solid color-mix(in srgb, #fff 6%, #000 6%);
      border-radius: 16px;
      box-shadow: var(--shadow-2);
      overflow: hidden;
    }
    .modal-head{
      display:flex; align-items:center; justify-content:space-between;
      gap: 12px; padding: 12px 16px;
      background: color-mix(in srgb, var(--card-2) 65%, transparent);
      border-bottom: 1px solid color-mix(in srgb, #000 16%, transparent);
    }
    .modal-head h2{ margin:0; font-size:1.05rem; }
    .modal-body{ padding: 16px; }
    .modal-body ul{ margin:0; padding-left: 1.2rem; display:grid; gap:.5rem; }
    .modal-body kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size:.95em; padding: .15em .45em; border-radius: 6px;
      border: 1px solid var(--key-border); background: var(--key); color: var(--text);
      box-shadow: 0 1px 0 color-mix(in srgb, #000 22%, transparent);
    }

    
    @media (max-width: 880px){
      .pane-inner{ flex-direction: column; }
      .calculator{ max-width:100%; }
    }
    @media (prefers-reduced-motion: reduce){
      * { transition: none !important; animation: none !important; }
    }

    
    [data-theme="dark"]{
      --bg:#0f1220; --bg-tint1: rgba(99,102,241,.10); --bg-tint2: rgba(37,99,235,.12);
      --card:#0f172a; --card-2:#111a33; --text:#e5e7eb; --muted:#9aa3b2;
      --key:#1f2a44; --key-hover:#233051; --key-border:#2a3556;
      --op:#1b2746; --op-hover:#223058;
      --danger:#3b1d1d; --danger-hover:#4a2323;
      --shadow-1: 0 8px 24px rgba(0,0,0,.35); --shadow-2: 0 18px 40px rgba(0,0,0,.45);
    }
    [data-theme="light"]{
      --bg:#f6f7f9; --bg-tint1: rgba(99,102,241,.10); --bg-tint2: rgba(37,99,235,.12);
      --card:#ffffff; --card-2:#f8fafc; --text:#0f172a; --muted:#667792;
      --key:#f1f5f9; --key-hover:#e6edf5; --key-border:#e7ecf3;
      --op:#e9eefc; --op-hover:#dbe6ff;
      --danger:#ffeaea; --danger-hover:#ffd6d6;
      --shadow-1: 0 8px 24px rgba(0,0,0,.08); --shadow-2: 0 18px 40px rgba(0,0,0,.12);
    }